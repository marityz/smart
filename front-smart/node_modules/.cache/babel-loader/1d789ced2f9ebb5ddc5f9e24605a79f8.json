{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/marina/Desktop/smart/front-smart/src/components/FormSearch/FormSearch.js\";\nimport React from 'react';\nimport './FormSearch.css';\nimport arrow from \"../../images/double-down-arrows-svgrepo-com.svg\";\nimport Result from \"../Result/Result\";\nimport ITEM_MAIN_FIELD from \"../../const/const-form\";\n\nclass FormSearch extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInputForm = event => {\n      event.preventDefault();\n      const target = event.target;\n      const value = target.value;\n      const name = target.name;\n      let formParams = this.state.formParams;\n      formParams[name] = value.trim();\n      this.setState({\n        formParams: formParams\n      });\n    };\n\n    this.handlerClickOpenAdvancedForm = () => {\n      this.setState({\n        isOpenAdvancedForm: !this.state.isOpenAdvancedForm\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const cleanParams = this.sanitazerParams(this.state.formParams);\n      this.props.api.getItem(this.generateApiParams(cleanParams)).then(items => {\n        this.setState({\n          items: items\n        });\n        return items;\n      }).then(items => {\n        this.setState({\n          isGetItem: true\n        }); // this.clearForm();\n      });\n    };\n\n    this.sanitazerParams = formInputs => {\n      //удалить все пусте строки, сформировать типовой запрос\n      for (let propName in formInputs) {\n        if (formInputs[propName] === null || formInputs[propName] === undefined || formInputs[propName] === \"\") {\n          delete formInputs[propName];\n        }\n      }\n\n      return formInputs;\n    };\n\n    this.generateApiParams = formInputs => {\n      let apiParams = {};\n      let params = {};\n\n      for (let keyInput in formInputs) {\n        const isMainKey = ITEM_MAIN_FIELD.includes(keyInput);\n\n        if (isMainKey) {\n          apiParams[keyInput] = formInputs[keyInput];\n        } else {\n          params[keyInput] = formInputs[keyInput];\n        }\n      }\n\n      apiParams.params = params;\n      return apiParams;\n    };\n\n    this.changeIisGetItem = () => {\n      this.setState({\n        isGetItem: !this.state.isGetItem\n      });\n    };\n\n    this.state = {\n      formParams: {},\n      items: [],\n      isOpenAdvancedForm: false,\n      isGetItem: false,\n      isSubmit: false\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.isGetItem) {\n      this.changeIisGetItem();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"search\",\n        name: \"search\",\n        id: \"search\",\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search__form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"inputtag\",\n            type: \"text\",\n            name: \"name\",\n            className: \"search__input\",\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",\n            onChange: this.handleInputForm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"button search__button\",\n            children: \"\\u0418\\u0441\\u043A\\u0430\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: arrow,\n          className: \"search__img\",\n          onClick: this.handlerClickOpenAdvancedForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), this.state.isOpenAdvancedForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search__advanced\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 46\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"search__input_params\",\n              minLength: 2,\n              name: \"description\",\n              onChange: this.handleInputForm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\u0424\\u0438\\u0440\\u043C\\u0430:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 42\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"search__input_params\",\n              minLength: 2,\n              name: \"\\u0424\\u0438\\u0440\\u043C\\u0430\",\n              onChange: this.handleInputForm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0430 \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 57\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"search__input_params\",\n              minLength: 2,\n              name: \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0430 \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C\",\n              onChange: this.handleInputForm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\u0426\\u0432\\u0435\\u0442: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 42\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"search__input_params\",\n              minLength: 2,\n              name: \"\\u0426\\u0432\\u0435\\u0442\",\n              onChange: this.handleInputForm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }, this) : \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), this.state.isGetItem ? /*#__PURE__*/_jsxDEV(Result, {\n        items: this.state.items,\n        api: this.props.api\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 41\n      }, this) : \" \"]\n    }, void 0, true);\n  }\n\n}\n\nexport default FormSearch;","map":{"version":3,"sources":["/Users/marina/Desktop/smart/front-smart/src/components/FormSearch/FormSearch.js"],"names":["React","Result","ITEM_MAIN_FIELD","FormSearch","Component","constructor","props","handleInputForm","event","preventDefault","target","value","name","formParams","state","trim","setState","handlerClickOpenAdvancedForm","isOpenAdvancedForm","handleSubmit","cleanParams","sanitazerParams","api","getItem","generateApiParams","then","items","isGetItem","formInputs","propName","undefined","apiParams","params","keyInput","isMainKey","includes","changeIisGetItem","isSubmit","componentDidUpdate","prevProps","prevState","snapshot","render","arrow"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './FormSearch.css'\nimport arrow from \"../../images/double-down-arrows-svgrepo-com.svg\"\nimport Result from \"../Result/Result\";\nimport ITEM_MAIN_FIELD from \"../../const/const-form\"\n\n\nclass FormSearch extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            formParams: {},\n            items: [],\n            isOpenAdvancedForm: false,\n            isGetItem: false,\n            isSubmit: false,\n        };\n    }\n\n\n    handleInputForm = (event) => {\n        event.preventDefault();\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n        let formParams = this.state.formParams;\n\n        formParams[name] = value.trim();\n\n        this.setState({\n            formParams: formParams,\n        });\n\n\n    };\n\n    // clearForm = () => {\n    //     document.getElementById(\"search\").reset();\n    //     this.setState({formParams: {}});\n    // };\n\n    handlerClickOpenAdvancedForm = () => {\n        this.setState({isOpenAdvancedForm: !this.state.isOpenAdvancedForm});\n\n    };\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n\n        const cleanParams = this.sanitazerParams(this.state.formParams);\n\n        this.props.api.getItem(this.generateApiParams(cleanParams))\n            .then((items) => {\n\n                this.setState({items: items});\n                return items;\n            })\n\n            .then((items) => {\n                this.setState({isGetItem: true});\n               // this.clearForm();\n            })\n\n    };\n\n\n    sanitazerParams = (formInputs) => {\n        //удалить все пусте строки, сформировать типовой запрос\n        for (let propName in formInputs) {\n            if (formInputs[propName] === null || formInputs[propName] === undefined || formInputs[propName] === \"\") {\n                delete formInputs[propName];\n            }\n        }\n        return formInputs;\n    };\n\n\n    generateApiParams = (formInputs) => {\n        let apiParams = {};\n        let params = {};\n\n        for (let keyInput in formInputs) {\n            const isMainKey = ITEM_MAIN_FIELD.includes(keyInput);\n            if (isMainKey) {\n                apiParams[keyInput] = formInputs[keyInput];\n\n            } else {\n                params[keyInput] = formInputs[keyInput];\n            }\n\n        }\n        apiParams.params = params;\n\n        return apiParams;\n\n    };\n\n\n    changeIisGetItem = () => {\n        this.setState({isGetItem: !this.state.isGetItem})\n    };\n\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.isGetItem) {\n            this.changeIisGetItem()\n        }\n\n    }\n\n    render() {\n\n        return (\n\n            <>\n                <form className=\"search\" name=\"search\" id=\"search\" onSubmit={this.handleSubmit}>\n                    <div className='search__form'>\n                        <input id=\"inputtag\" type=\"text\" name=\"name\" className=\"search__input\"\n                               placeholder=\"Введите название товара\" onChange={this.handleInputForm}/>\n                        <button type=\"submit\" className=\"button search__button\">Искать</button>\n                    </div>\n                    <img src={arrow} className=\"search__img\" onClick={this.handlerClickOpenAdvancedForm}/>\n                    {this.state.isOpenAdvancedForm ? (\n                        <div className=\"search__advanced\">\n                            <label>Описание: <br/>\n                                <input className=\"search__input_params\" minLength={2} name=\"description\"\n                                       onChange={this.handleInputForm}/>\n                            </label>\n                            <label>Фирма:<br/>\n                                <input className=\"search__input_params\" minLength={2} name=\"Фирма\"\n                                       onChange={this.handleInputForm}/>\n                            </label>\n\n                            <label>Страна производитель:<br/>\n                                <input className=\"search__input_params\" minLength={2} name=\"Страна производитель\"\n                                       onChange={this.handleInputForm}/>\n                            </label>\n                            <label>Цвет: <br/>\n                                <input className=\"search__input_params\" minLength={2} name=\"Цвет\"\n                                       onChange={this.handleInputForm}/>\n                            </label>\n                        </div>) : (\n                        \" \"\n                    )}\n                </form>\n                {this.state.isGetItem ? <Result items={this.state.items} api={this.props.api}/> : \" \"}\n            </>\n        )\n    }\n}\n\nexport default FormSearch;\n"]},"metadata":{},"sourceType":"module"}